<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>חֲדַר בְּרִיחָה - מַסָּע בְּעִקְבוֹת הַחֲנֻכָּה</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Heebo', sans-serif;
            min-height: 100vh;
            background: url('https://i.imgur.com/wC315yU.png') center/cover fixed;
            color: #E6D8A2;
        }
        @keyframes glow {
            0%,100% { box-shadow: 0 0 20px rgba(255,215,0,0.4); }
            50% { box-shadow: 0 0 40px rgba(255,215,0,0.7); }
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 40px 20px; }
        .main-title {
            font-family: 'Cinzel', serif;
            font-size: 3.5em;
            color: #FFD700;
            text-align: center;
            text-shadow: 0 0 30px gold;
            animation: glow 3s infinite;
            margin-bottom: 10px;
        }
        .subtitle { text-align: center; font-size: 1.4em; color: #E6D8A2; margin-bottom: 30px; }

        .instructions {
            background: rgba(20,15,10,0.9);
            border: 3px solid #FFD700;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            margin: 40px auto;
            text-align: center;
            box-shadow: 0 10px 40px rgba(255,215,0,0.4);
            animation: glow 4s infinite;
        }
        .instructions h2 { color: #FFD700; font-family: 'Cinzel', serif; font-size: 2em; margin-bottom: 15px; }

        .puzzles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        .puzzle-card {
            background: rgba(20,15,10,0.95);
            border: 3px solid #CC9900;
            border-radius: 20px;
            padding: 30px;
            position: relative;
            min-height: 220px;
            transition: transform 0.3s;
        }
        .puzzle-card:hover { transform: translateY(-10px); }
        .puzzle-number {
            position: absolute;
            top: 15px; right: 15px;
            width: 60px; height: 60px;
            background: linear-gradient(135deg, #FFD700, #CC9900);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cinzel', serif;
            font-size: 2em;
            color: #000;
            font-weight: bold;
            box-shadow: 0 5px 20px gold;
        }
        .puzzle-question { color: #fff; font-size: 1.3em; padding-right: 80px; line-height: 1.7; }
        .answer-input {
            width: 100%; max-width: 160px;
            padding: 12px;
            font-size: 1.8em;
            text-align: center;
            background: rgba(0,0,0,0.7);
            border: 2px solid #CC9900;
            border-radius: 10px;
            color: #FFD700;
            margin-top: 20px;
        }
        .answer-input:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 20px gold;
        }

        .progress-counter {
            position: fixed;
            top: 20px; left: 20px;
            background: rgba(20,15,10,0.95);
            border: 3px solid #FFD700;
            border-radius: 15px;
            padding: 15px 30px;
            color: #FFD700;
            font-size: 1.4em;
            font-weight: bold;
            z-index: 999;
            box-shadow: 0 5px 25px rgba(255,215,0,0.5);
        }

        .code-section {
            background: rgba(20,15,10,0.95);
            border: 4px solid #FFD700;
            border-radius: 25px;
            padding: 50px;
            max-width: 700px;
            margin: 60px auto;
            text-align: center;
            animation: glow 4s infinite;
        }
        .code-title { font-family: 'Cinzel', serif; font-size: 2.8em; color: #FFD700; margin-bottom: 20px; }
        .code-input {
            width: 100%; max-width: 480px;
            padding: 20px;
            font-size: 2.2em;
            text-align: center;
            background: rgba(0,0,0,0.8);
            border: 3px solid #CC9900;
            border-radius: 15px;
            color: #FFD700;
            letter-spacing: 12px;
            margin: 20px auto;
            display: block;
        }
        .submit-button {
            background: linear-gradient(135deg, #CC9900, #FFD700);
            color: #000;
            padding: 18px 60px;
            border: none;
            border-radius: 50px;
            font-size: 1.6em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255,215,0,0.6);
            transition: 0.4s;
        }
        .submit-button:hover { transform: scale(1.1); }

        .feedback {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.6s;
        }
        .feedback.show { opacity: 1; }
        .feedback.correct { background: rgba(0,255,0,0.3); border: 3px solid lime; color: lime; }
        .feedback.incorrect { background: rgba(255,0,0,0.3); border: 3px solid red; color: red; }

        @media (max-width: 768px) {
            .main-title { font-size: 2.5em; }
            .puzzles-grid { grid-template-columns: 1fr; }
            .code-input { font-size: 1.6em; letter-spacing: 6px; }
        }
    </style>
</head>
<body>

    <div class="progress-counter">
        חידות שהושלמו: <span id="filledCount">0</span>/10
    </div>

    <div class="container">
        <h1 class="main-title">חֲדַר בְּרִיחָה – מַסָּע בְּעִקְבוֹת הַחֲנֻכָּה</h1>
        <p class="subtitle">חדר מספר 1 – חנרות, סופגניות וגבורה</p>

        <div class="instructions">
            <h2>הוראות המשחק</h2>
            <p>פתרו את כל 10 החידות, רשמו את התשובות במספרים בלבד.<br>
            בסוף אספו את כל המספרים לפי הסדר וקבלו את הקוד הסודי!</p>
        </div>

        <div class="puzzles-grid">
            <div class="puzzle-card">
                <div class="puzzle-number">1</div>
                <div class="puzzle-question">כמה ילדים היו לחנה?</div>
                <input type="text" class="answer-input" data-id="1" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">2</div>
                <div class="puzzle-question">כמה נרות מדליקים ביום הרביעי של חנוכה?</div>
                <input type="text" class="answer-input" data-id="2" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">3</div>
                <div class="puzzle-question">3 חבילות של 6 סופגניות = ? נתנה 11 לשכנים → כמה נשאר?</div>
                <input type="text" class="answer-input" data-id="3" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">4</div>
                <div class="puzzle-question">20 כדים × 1 ליטר = ? תורידו 12</div>
                <input type="text" class="answer-input" data-id="4" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">5</div>
                <div class="puzzle-question">כמה אותיות בסביבון? × 8 ימי החג</div>
                <input type="text" class="answer-input" data-id="5" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">6</div>
                <div class="puzzle-question">24 סופגניות ÷ 4 ילדים = ?</div>
                <input type="text" class="answer-input" data-id="6" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">7</div>
                <div class="puzzle-question">סך כל הנרות בכל 8 הימים?</div>
                <input type="text" class="answer-input" data-id="7" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">8</div>
                <div class="puzzle-question">קופסת גפרורים 50, השתמשו ב-44 → כמה נשארו?</div>
                <input type="text" class="answer-input" data-id="8" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">9</div>
                <div class="puzzle-question">80 נרות בחבילה, גיא השתמש ב-74 → כמה נשאר?</div>
                <input type="text" class="answer-input" data-id="9" placeholder="?">
            </div>
            <div class="puzzle-card">
                <div class="puzzle-number">10</div>
                <div class="puzzle-question">כמה בנים היו למתתיהו הכהן?</div>
                <input type="text" class="answer-input" data-id="10" placeholder="?">
            </div>
        </div>

        <div class="code-section">
            <h2 class="code-title">הקוד הסופי</h2>
            <p>רשמו את כל 10 התשובות ברצף (ללא רווחים)</p>
            <input type="text" id="finalCode" class="code-input" maxlength="12" placeholder="____________">
            <button class="submit-button" onclick="checkFinalCode()">פתח את המנעול</button>
            <div id="feedback" class="feedback"></div>
        </div>
    </div>

    <script>
        // התשובות הנכונות (חייבים להיות בדיוק ככה – מחרוזות!)
        const correctAnswers = {
            "1": "7",
            "2": "5",
            "3": "7",
            "4": "8",
            "5": "32",
            "6": "6",
            "7": "44",
            "8": "6",
            "9": "6",
            "10": "5"
        };

        const FINAL_CODE = "757832644665";   // הקוד הסופי הנכון

        let filledCount = 0;
        let correctCount = 0;

        const filledCountSpan = document.getElementById('filledCount');

        // עדכון מונה + בדיקת נכונות בכל שינוי
        document.querySelectorAll('.answer-input').forEach(input => {
            input.addEventListener('input', function() {
                const id = this.getAttribute('data-id');
                const value = this.value.trim();

                // עדכון מונה "מולא"
                if (value !== "" && !isNaN(value)) {
                    if (!this.dataset.filled) {
                        filledCount++;
                        this.dataset.filled = "true";
                        filledCountSpan.textContent = filledCount;
                    }
                } else {
                    if (this.dataset.filled) {
                        filledCount--;
                        delete this.dataset.filled;
                        filledCountSpan.textContent = filledCount;
                    }
                }

                // בדיקת נכונות (שקטה – רק בשביל הקוד הסופי)
                if (value === correctAnswers[id]) {
                    this.style.borderColor = "#00FF00";
                    this.dataset.correct = "true";
                } else {
                    this.style.borderColor = "#CC9900";
                    delete this.dataset.correct;
                }
            });
        });

        function checkFinalCode() {
            const feedback = document.getElementById('feedback');
            feedback.classList.remove('show', 'correct', 'incorrect');

            // בדיקה שכל החידות נכונות
            const allCorrect = Array.from(document.querySelectorAll('.answer-input'))
                .every(input => input.dataset.correct === "true");

            const userCode = document.getElementById('finalCode').value.trim();

            setTimeout(() => {
                if (!allCorrect) {
                    feedback.textContent = "יש תשובות שגויות! בדקו שוב את כל החידות.";
                    feedback.className = "feedback incorrect show";
                } else if (userCode !== FINAL_CODE) {
                    feedback.textContent = "הקוד שגוי… נסו שוב";
                    feedback.className = "feedback incorrect show";
                } else {
                    feedback.textContent = "כל הכבוד!!! הקוד נכון – אתם ממשיכים לחדר הבא…";
                    feedback.className = "feedback correct show";

                    setTimeout(() => {
                        // כאן שנה את השם של הדף הבא שלך!
                        window.location.href = "new_edit2.html";   // ← שנה לפי השם האמיתי של הקובץ הבא
                    }, 2500);
                }
            }, 300);
        }

        // אפשר גם ללחוץ Enter בשדה הקוד הסופי
        document.getElementById('finalCode').addEventListener('keypress', e => {
            if (e.key === 'Enter') checkFinalCode();
        });
    </script>
</body>
</html>
